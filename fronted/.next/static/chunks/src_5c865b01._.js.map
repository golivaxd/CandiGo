{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/LVazquez/OneDrive%20-%20CERVECERIA%20CIELITO%20LINDO/Escritorio/CandiGo/CandiGo/fronted/src/lib/supabaseClient.ts"],"sourcesContent":["'use client';\r\nimport { createClient } from '@supabase/supabase-js';\r\nimport { useEffect } from 'react';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey, {\r\n  auth: {\r\n    persistSession: true,\r\n    autoRefreshToken: true,\r\n    detectSessionInUrl: true,\r\n  },\r\n});\r\n\r\nexport function useAuth(onAuth: (session: any) => void) {\r\n  useEffect(() => {\r\n    const { data: subscription } = supabase.auth.onAuthStateChange(\r\n      async (event, session) => {\r\n        if (event === 'SIGNED_IN') {\r\n          onAuth(session);\r\n        } else if (event === 'SIGNED_OUT') {\r\n          onAuth(null);\r\n        }\r\n      }\r\n    );\r\n\r\n    return () => subscription?.subscription?.unsubscribe();\r\n  }, [onAuth]);\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAIoB;AAHpB;AACA;;AAFA;;;AAIA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,CAAA,GAAA,0LAAA,CAAA,eAAY,AAAD,EAAE,aAAa,iBAAiB;IACjE,MAAM;QACJ,gBAAgB;QAChB,kBAAkB;QAClB,oBAAoB;IACtB;AACF;AAEO,SAAS,QAAQ,MAA8B;;IACpD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;6BAAE;YACR,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,SAAS,IAAI,CAAC,iBAAiB;qCAC5D,OAAO,OAAO;oBACZ,IAAI,UAAU,aAAa;wBACzB,OAAO;oBACT,OAAO,IAAI,UAAU,cAAc;wBACjC,OAAO;oBACT;gBACF;;YAGF;qCAAO;wBAAM;2BAAA,yBAAA,oCAAA,6BAAA,aAAc,YAAY,cAA1B,iDAAA,2BAA4B,WAAW;;;QACtD;4BAAG;QAAC;KAAO;AACb;GAdgB","debugId":null}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/LVazquez/OneDrive%20-%20CERVECERIA%20CIELITO%20LINDO/Escritorio/CandiGo/CandiGo/fronted/src/app/comparativa/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { Suspense, useEffect, useState } from 'react';\r\nimport { useSearchParams } from 'next/navigation';\r\nimport { supabase } from '@/lib/supabaseClient';\r\nimport './comp.css';\r\n\r\ntype Propuesta = {\r\n  id: number;\r\n  candidato_id: number;\r\n  titulo: string;\r\n  descripcion: string;\r\n  categoria: string;\r\n};\r\n\r\ntype Candidato = {\r\n  id: number;\r\n  nombre: string;\r\n  cargo: string;\r\n  entidad: string;\r\n};\r\n\r\nfunction ComparativaContent() {\r\n  const searchParams = useSearchParams();\r\n  const idsParam = searchParams.get('ids');\r\n  const ids = idsParam ? idsParam.split(',').map(Number) : [];\r\n\r\n  const [candidatos, setCandidatos] = useState<Candidato[]>([]);\r\n  const [propuestas, setPropuestas] = useState<Propuesta[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [errorMsg, setErrorMsg] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchDatos = async () => {\r\n      if (ids.length === 0) {\r\n        setCandidatos([]);\r\n        setPropuestas([]);\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      setLoading(true);\r\n      setErrorMsg(null);\r\n\r\n      try {\r\n        const { data: candData, error: candError } = await supabase\r\n          .from('candidatos')\r\n          .select('id, nombre, cargo, entidad')\r\n          .in('id', ids);\r\n\r\n        if (candError) throw candError;\r\n        setCandidatos(candData || []);\r\n\r\n        const { data: propData, error: propError } = await supabase\r\n          .from('propuestas')\r\n          .select('*')\r\n          .in('candidato_id', ids);\r\n\r\n        if (propError) throw propError;\r\n        setPropuestas(propData || []);\r\n      } catch (err: any) {\r\n        console.error('Error cargando comparativa:', err);\r\n        setErrorMsg(err?.message || 'Error desconocido');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchDatos();\r\n  }, [ids]);\r\n\r\n  if (errorMsg)\r\n    return <p style={{ color: 'red', textAlign: 'center', marginTop: '2rem' }}>Error: {errorMsg}</p>;\r\n\r\n  if (!loading && candidatos.length === 0)\r\n    return <p style={{ textAlign: 'center', marginTop: '2rem' }}>No hay candidatos seleccionados.</p>;\r\n\r\n  return (\r\n    <>\r\n      {/* HEADER FIJO */}\r\n      <header className=\"comp-header\">\r\n        <h2>Comparativa</h2>\r\n        <button className=\"comp-back-btn\" onClick={() => window.history.back()}>\r\n          Regresar\r\n        </button>\r\n      </header>\r\n\r\n      <div className=\"comp-main\">\r\n        <h1 className=\"comp-title\">Comparativa de Propuestas</h1>\r\n\r\n        <div className=\"comp-card-container\">\r\n          {candidatos.map((c) => {\r\n            const propCandidato = propuestas.filter((p) => p.candidato_id === c.id);\r\n\r\n            return (\r\n              <div key={c.id} className=\"comp-card\">\r\n                <h2>{c.nombre}</h2>\r\n\r\n                <p>\r\n                  <strong>Cargo:</strong> {c.cargo}\r\n                </p>\r\n\r\n                <p>\r\n                  <strong>Entidad:</strong> {c.entidad}\r\n                </p>\r\n\r\n                <h3 className=\"comp-prop-title\">Propuestas</h3>\r\n\r\n                {propCandidato.length > 0 ? (\r\n                  <ul style={{ listStyle: 'none', padding: 0, margin: 0 }}>\r\n                    {propCandidato.map((p) => (\r\n                      <li key={p.id} className=\"comp-prop-item\">\r\n                        <strong>{p.titulo}</strong>\r\n                        <br />\r\n                        <span>{p.descripcion}</span>\r\n                        <br />\r\n                        <span className=\"comp-prop-cat\">{p.categoria}</span>\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                ) : (\r\n                  <p style={{ color: '#4a5568', fontStyle: 'italic', marginTop: '0.5rem' }}>\r\n                    No hay propuestas para este candidato.\r\n                  </p>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default function ComparativaPage() {\r\n  return (\r\n    <Suspense fallback={<div>Cargando comparativa...</div>}>\r\n      <ComparativaContent />\r\n    </Suspense>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}