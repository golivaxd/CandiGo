{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/LVazquez/OneDrive%20-%20CERVECERIA%20CIELITO%20LINDO/Escritorio/CandiGo/CandiGo/fronted/src/lib/supabaseClient.ts"],"sourcesContent":["'use client';\r\nimport { createClient } from '@supabase/supabase-js';\r\nimport { useEffect } from 'react';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey, {\r\n  auth: {\r\n    persistSession: true,\r\n    autoRefreshToken: true,\r\n    detectSessionInUrl: true,\r\n  },\r\n});\r\n\r\nexport function useAuth(onAuth: (session: any) => void) {\r\n  useEffect(() => {\r\n    const { data: subscription } = supabase.auth.onAuthStateChange(\r\n      async (event, session) => {\r\n        if (event === 'SIGNED_IN') {\r\n          onAuth(session);\r\n        } else if (event === 'SIGNED_OUT') {\r\n          onAuth(null);\r\n        }\r\n      }\r\n    );\r\n\r\n    return () => subscription?.subscription?.unsubscribe();\r\n  }, [onAuth]);\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAIoB;AAHpB;AACA;;AAFA;;;AAIA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,CAAA,GAAA,0LAAA,CAAA,eAAY,AAAD,EAAE,aAAa,iBAAiB;IACjE,MAAM;QACJ,gBAAgB;QAChB,kBAAkB;QAClB,oBAAoB;IACtB;AACF;AAEO,SAAS,QAAQ,MAA8B;;IACpD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;6BAAE;YACR,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,SAAS,IAAI,CAAC,iBAAiB;qCAC5D,OAAO,OAAO;oBACZ,IAAI,UAAU,aAAa;wBACzB,OAAO;oBACT,OAAO,IAAI,UAAU,cAAc;wBACjC,OAAO;oBACT;gBACF;;YAGF;qCAAO;wBAAM;2BAAA,yBAAA,oCAAA,6BAAA,aAAc,YAAY,cAA1B,iDAAA,2BAA4B,WAAW;;;QACtD;4BAAG;QAAC;KAAO;AACb;GAdgB","debugId":null}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/LVazquez/OneDrive%20-%20CERVECERIA%20CIELITO%20LINDO/Escritorio/CandiGo/CandiGo/fronted/src/app/cargos/%5Bcargo%5D/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport { supabase } from \"@/lib/supabaseClient\";\r\nimport \"./cargo.css\";\r\n\r\ntype Candidato = {\r\n  id: number;\r\n  nombre: string;\r\n  cargo: string;\r\n  entidad: string;\r\n  activo: boolean;\r\n};\r\n\r\nexport default function CargoDetalle() {\r\n  const params = useParams();\r\n  const router = useRouter();\r\n\r\n  const [candidatos, setCandidatos] = useState<Candidato[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [seleccionados, setSeleccionados] = useState<number[]>([]);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [filtroEntidad, setFiltroEntidad] = useState(\"\");\r\n\r\n  const cargoParam = params?.cargo;\r\n  const cargo = Array.isArray(cargoParam)\r\n    ? decodeURIComponent(cargoParam[0])\r\n    : decodeURIComponent(cargoParam || \"\");\r\n\r\n  // ============================\r\n  //    CARGAR CANDIDATOS\r\n  // ============================\r\n  useEffect(() => {\r\n    const fetchCandidatos = async () => {\r\n      setLoading(true);\r\n\r\n      const { data, error } = await supabase\r\n        .from(\"candidatos\")\r\n        .select(\"id, nombre, cargo, entidad, activo\")\r\n        .eq(\"cargo\", cargo)\r\n        .eq(\"activo\", true);\r\n\r\n      if (!error && data) setCandidatos(data);\r\n      setLoading(false);\r\n    };\r\n\r\n    if (cargo) fetchCandidatos();\r\n  }, [cargo]);\r\n\r\n  // ============================\r\n  //   SELECCIONAR CANDIDATOS\r\n  // ============================\r\n  const toggleSeleccion = (id: number) => {\r\n    setSeleccionados((prev) =>\r\n      prev.includes(id) ? prev.filter((x) => x !== id) : [...prev, id]\r\n    );\r\n  };\r\n\r\n  const irAComparativa = () => {\r\n    if (seleccionados.length < 2) {\r\n      alert(\"Selecciona al menos 2 candidatos para comparar.\");\r\n      return;\r\n    }\r\n    router.push(`/comparativa?ids=${seleccionados.join(\",\")}`);\r\n  };\r\n\r\n  // ============================\r\n  //        FILTRADOS\r\n  // ============================\r\n  const entidadesUnicas = Array.from(\r\n    new Set(candidatos.map((c) => c.entidad))\r\n  );\r\n\r\n  const candidatosFiltrados = candidatos.filter((c) => {\r\n    const matchSearch = c.nombre.toLowerCase().includes(search.toLowerCase());\r\n    const matchEntidad = filtroEntidad ? c.entidad === filtroEntidad : true;\r\n    return matchSearch && matchEntidad;\r\n  });\r\n\r\n  if (loading) return <p>Cargando candidatos...</p>;\r\n\r\n  return (\r\n    <div className=\"cargo-container\">\r\n      {/* ===== HEADER FIJO ===== */}\r\n      <header className=\"cargo-header\">\r\n        <h1 className=\"titulo-header\">Cargo: {cargo}</h1>\r\n\r\n        <button className=\"header-back\" onClick={() => router.back()}>\r\n          â¬… Regresar\r\n        </button>\r\n      </header>\r\n\r\n      <div className=\"contenido-pagina\">\r\n        {/* ===== BARRA DE FILTROS ===== */}\r\n        <div className=\"filtros-barra\">\r\n          <input\r\n            type=\"text\"\r\n            className=\"input-buscar\"\r\n            placeholder=\"Buscar por nombre...\"\r\n            value={search}\r\n            onChange={(e) => setSearch(e.target.value)}\r\n          />\r\n\r\n          <select\r\n            className=\"select-entidad\"\r\n            value={filtroEntidad}\r\n            onChange={(e) => setFiltroEntidad(e.target.value)}\r\n          >\r\n            <option value=\"\">Todas las entidades</option>\r\n            {entidadesUnicas.map((ent) => (\r\n              <option key={ent} value={ent}>\r\n                {ent}\r\n              </option>\r\n            ))}\r\n          </select>\r\n\r\n          <button className=\"btn-comparar\" onClick={irAComparativa}>\r\n            Comparar Propuestas ({seleccionados.length})\r\n          </button>\r\n        </div>\r\n\r\n        {/* ===== LISTA DE CANDIDATOS ===== */}\r\n        <ul className=\"lista-candidatos\">\r\n          {candidatosFiltrados.map((c) => (\r\n            <li\r\n              key={c.id}\r\n              className={`item-candidato ${\r\n                seleccionados.includes(c.id) ? \"seleccionado\" : \"\"\r\n              }`}\r\n            >\r\n              <input\r\n                type=\"checkbox\"\r\n                className=\"checkbox-candidato\"\r\n                checked={seleccionados.includes(c.id)}\r\n                onChange={() => toggleSeleccion(c.id)}\r\n              />\r\n\r\n              <div>\r\n                <h2>{c.nombre}</h2>\r\n                <p>\r\n                  <strong>Cargo:</strong> {c.cargo}\r\n                </p>\r\n                <p>\r\n                  <strong>Entidad:</strong> {c.entidad}\r\n                </p>\r\n              </div>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n\r\n        {candidatosFiltrados.length === 0 && (\r\n          <p>No se encontraron candidatos con esos filtros.</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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","debugId":null}}]
}