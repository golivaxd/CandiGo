{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/LVazquez/OneDrive%20-%20CERVECERIA%20CIELITO%20LINDO/Escritorio/CandiGo/fronted/src/lib/supabaseClient.ts"],"sourcesContent":["'use client';\nimport { createClient } from '@supabase/supabase-js';\nimport { useEffect } from 'react';\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey, {\n  auth: {\n    persistSession: true,\n    autoRefreshToken: true,\n    detectSessionInUrl: true,\n  },\n});\n\nexport function useAuth(onAuth: (session: any) => void) {\n  useEffect(() => {\n    const { data: subscription } = supabase.auth.onAuthStateChange(\n      async (event, session) => {\n        if (event === 'SIGNED_IN') {\n          onAuth(session);\n        } else if (event === 'SIGNED_OUT') {\n          onAuth(null);\n        }\n      }\n    );\n\n    return () => subscription?.subscription?.unsubscribe();\n  }, [onAuth]);\n}\n\n"],"names":[],"mappings":";;;;AAIoB;AAHpB;AACA;;AAFA;;;AAIA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,CAAA,GAAA,0LAAA,CAAA,eAAY,AAAD,EAAE,aAAa,iBAAiB;IACjE,MAAM;QACJ,gBAAgB;QAChB,kBAAkB;QAClB,oBAAoB;IACtB;AACF;AAEO,SAAS,QAAQ,MAA8B;;IACpD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;6BAAE;YACR,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,SAAS,IAAI,CAAC,iBAAiB;qCAC5D,OAAO,OAAO;oBACZ,IAAI,UAAU,aAAa;wBACzB,OAAO;oBACT,OAAO,IAAI,UAAU,cAAc;wBACjC,OAAO;oBACT;gBACF;;YAGF;qCAAO;wBAAM;2BAAA,yBAAA,oCAAA,6BAAA,aAAc,YAAY,cAA1B,iDAAA,2BAA4B,WAAW;;;QACtD;4BAAG;QAAC;KAAO;AACb;GAdgB","debugId":null}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/LVazquez/OneDrive%20-%20CERVECERIA%20CIELITO%20LINDO/Escritorio/CandiGo/fronted/src/app/foro/page.tsx"],"sourcesContent":["'use client';\nimport { useEffect, useState } from 'react';\nimport { supabase } from '@/lib/supabaseClient';\nimport './foro.css';\n\ninterface Debate {\n  id: number;\n  title: string;\n  author: string;\n  created_at: string;\n  description: string;\n}\n\ninterface Comentario {\n  id: number;\n  debate_id: number;\n  autor: string;\n  contenido: string;\n  created_at: string;\n  user_id: string;\n}\n\nexport default function Foro() {\n  const [debates, setDebates] = useState<Debate[]>([]);\n  const [selectedDebate, setSelectedDebate] = useState<Debate | null>(null);\n  const [comentarios, setComentarios] = useState<Comentario[]>([]);\n  const [newComentario, setNewComentario] = useState('');\n  const [newDebateTitle, setNewDebateTitle] = useState('');\n  const [newDebateDescription, setNewDebateDescription] = useState('');\n  const [showNewDebateForm, setShowNewDebateForm] = useState(false);\n  const [user, setUser] = useState<any>(null);\n\n  useEffect(() => {\n    fetchDebates();\n    supabase.auth.getSession().then(({ data }) => {\n      if (data.session) setUser(data.session.user);\n    });\n    supabase.auth.onAuthStateChange((_event, session) => {\n      setUser(session?.user || null);\n    });\n  }, []);\n\n  const fetchDebates = async () => {\n    const { data } = await supabase\n      .from('debates')\n      .select('*')\n      .order('created_at', { ascending: false });\n    if (data) setDebates(data);\n  };\n\n  const fetchComentarios = async (debateId: number) => {\n    const { data } = await supabase\n      .from('comentarios')\n      .select('*')\n      .eq('debate_id', debateId)\n      .order('created_at', { ascending: true });\n    if (data) setComentarios(data);\n  };\n\n  const handleDebateClick = (debate: Debate) => {\n    setSelectedDebate(debate);\n    fetchComentarios(debate.id);\n  };\n\n  const handleAddComentario = async () => {\n    if (!newComentario.trim() || !selectedDebate || !user) return;\n\n    const displayName =\n      user.user_metadata?.full_name ||\n      user.user_metadata?.display_name ||\n      'Usuario';\n\n    const { data } = await supabase\n      .from('comentarios')\n      .insert({\n        debate_id: selectedDebate.id,\n        autor: displayName,\n        contenido: newComentario,\n        created_at: new Date().toISOString(),\n        user_id: user.id\n      })\n      .select()\n      .single();\n\n    if (data) {\n      setComentarios([...comentarios, data]);\n      setNewComentario('');\n    }\n  };\n\n  const handleAddDebate = async () => {\n    if (!newDebateTitle.trim() || !newDebateDescription.trim() || !user) return;\n\n    const displayName =\n      user.user_metadata?.full_name ||\n      user.user_metadata?.display_name ||\n      'Usuario';\n\n    const { data } = await supabase\n      .from('debates')\n      .insert({\n        title: newDebateTitle,\n        description: newDebateDescription,\n        author: displayName,\n        created_at: new Date().toISOString()\n      })\n      .select()\n      .single();\n\n    if (data) {\n      setDebates([data, ...debates]);\n      setShowNewDebateForm(false);\n      setNewDebateTitle('');\n      setNewDebateDescription('');\n    }\n  };\n\n  return (\n    <div className=\"foro-container\">\n      {/* HEADER */}\n      <header className=\"foro-header\">\n        <h1>Foro de Debates</h1>\n        <div className=\"foro-header-buttons\">\n          <button\n            className=\"header-btn new\"\n            onClick={() => setShowNewDebateForm(true)}\n          >\n            + Nuevo Debate\n          </button>\n          <button\n            className=\"header-btn back\"\n            onClick={() => (window.location.href = '/dashboard')}\n          >\n            ← Regresar\n          </button>\n        </div>\n      </header>\n\n      <main className=\"foro-main\">\n        {/* LISTA DE DEBATES */}\n        {!selectedDebate && !showNewDebateForm && (\n          <ul className=\"debate-list\">\n            {debates.map((debate) => (\n              <li\n                key={debate.id}\n                className=\"debate-item\"\n                onClick={() => handleDebateClick(debate)}\n              >\n                <h3>{debate.title}</h3>\n                <p>{debate.description}</p>\n                <small>\n                  Por {debate.author} • {new Date(debate.created_at).toLocaleString()}\n                </small>\n              </li>\n            ))}\n          </ul>\n        )}\n\n        {/* NUEVO DEBATE */}\n        {showNewDebateForm && (\n          <div className=\"new-debate\">\n            <button\n              className=\"back-btn\"\n              onClick={() => setShowNewDebateForm(false)}\n            >\n              ← Volver\n            </button>\n            <h2>Crear nuevo debate</h2>\n            <input\n              placeholder=\"Título del debate\"\n              value={newDebateTitle}\n              onChange={(e) => setNewDebateTitle(e.target.value)}\n            />\n            <textarea\n              placeholder=\"Descripción del debate\"\n              value={newDebateDescription}\n              onChange={(e) => setNewDebateDescription(e.target.value)}\n            />\n            <button className=\"send-btn\" onClick={handleAddDebate}>\n              Crear Debate\n            </button>\n          </div>\n        )}\n\n        {/* DETALLE DEL DEBATE */}\n        {selectedDebate && (\n          <div className=\"debate-detalle\">\n            <h2>{selectedDebate.title}</h2>\n            <p>{selectedDebate.description}</p>\n            <small>\n              Por {selectedDebate.author} • {new Date(selectedDebate.created_at).toLocaleString()}\n            </small>\n\n            <h3>Comentarios</h3>\n            <div className=\"comentarios\">\n              {comentarios.map((c) => (\n                <div key={c.id} className=\"comentario\">\n                  <strong>{c.autor}</strong>{' '}\n                  <small>{new Date(c.created_at).toLocaleString()}</small>\n                  <p>{c.contenido}</p>\n                </div>\n              ))}\n            </div>\n\n            <textarea\n              className=\"comentario-input\"\n              placeholder=\"Escribe tu comentario...\"\n              value={newComentario}\n              onChange={(e) => setNewComentario(e.target.value)}\n            />\n            <div className=\"comentario-buttons\">\n              <button className=\"send-btn\" onClick={handleAddComentario}>\n                Enviar Comentario\n              </button>\n              <button\n                className=\"back-btn inline\"\n                onClick={() => setSelectedDebate(null)}\n              >\n                Volver a debates\n              </button>\n            </div>\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}