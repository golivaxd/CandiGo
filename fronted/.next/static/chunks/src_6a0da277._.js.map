{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Goliva/Desktop/CandiGo/fronted/src/lib/supabaseClient.ts"],"sourcesContent":["// src/lib/supabaseClient.ts\r\nimport { createClient } from '@supabase/supabase-js';\r\nimport { useEffect } from 'react';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\r\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\r\n\r\nif (!supabaseUrl || !supabaseKey) {\r\n  throw new Error('supabaseUrl and supabaseKey are required.');\r\n}\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseKey, {\r\n  auth: {\r\n    persistSession: true,\r\n    autoRefreshToken: true,\r\n    detectSessionInUrl: true, //  s煤per importante para reset password / magic links\r\n  },\r\n});\r\n\r\n// Hook para escuchar cambios de sesi贸n\r\nexport function useAuth(onAuth: (session: any) => void) {\r\n  useEffect(() => {\r\n    const { data: subscription } = supabase.auth.onAuthStateChange(\r\n      async (event, session) => {\r\n        if (event === 'SIGNED_IN') {\r\n          onAuth(session);\r\n        } else if (event === 'SIGNED_OUT') {\r\n          onAuth(null);\r\n        }\r\n      }\r\n    );\r\n\r\n    return () => {\r\n      subscription?.subscription?.unsubscribe();\r\n    };\r\n  }, [onAuth]);\r\n}\r\n\r\n// SignUp (ejemplo)\r\nexport const handleSignUp = async (\r\n  e: React.FormEvent,\r\n  email: string,\r\n  password: string\r\n) => {\r\n  e.preventDefault();\r\n  try {\r\n    const { data, error } = await supabase.auth.signUp({\r\n      email,\r\n      password,\r\n    });\r\n    if (error) {\r\n      console.error('Error al registrarse:', error);\r\n    } else {\r\n      console.log('Registro exitoso:', data);\r\n    }\r\n  } catch (err) {\r\n    console.error('Error inesperado:', err);\r\n  }\r\n};\r\n"],"names":[],"mappings":"AAAA,4BAA4B;;;;;;AAIR;AAHpB;AACA;;;;AAEA,MAAM;AACN,MAAM;AAEN;;AAIO,MAAM,WAAW,CAAA,GAAA,0LAAA,CAAA,eAAY,AAAD,EAAE,aAAa,aAAa;IAC7D,MAAM;QACJ,gBAAgB;QAChB,kBAAkB;QAClB,oBAAoB;IACtB;AACF;AAGO,SAAS,QAAQ,MAA8B;;IACpD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;6BAAE;YACR,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,SAAS,IAAI,CAAC,iBAAiB;qCAC5D,OAAO,OAAO;oBACZ,IAAI,UAAU,aAAa;wBACzB,OAAO;oBACT,OAAO,IAAI,UAAU,cAAc;wBACjC,OAAO;oBACT;gBACF;;YAGF;qCAAO;wBACL;oBAAA,yBAAA,oCAAA,6BAAA,aAAc,YAAY,cAA1B,iDAAA,2BAA4B,WAAW;gBACzC;;QACF;4BAAG;QAAC;KAAO;AACb;GAhBgB;AAmBT,MAAM,eAAe,OAC1B,GACA,OACA;IAEA,EAAE,cAAc;IAChB,IAAI;QACF,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,MAAM,CAAC;YACjD;YACA;QACF;QACA,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC,yBAAyB;QACzC,OAAO;YACL,QAAQ,GAAG,CAAC,qBAAqB;QACnC;IACF,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,qBAAqB;IACrC;AACF","debugId":null}},
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Goliva/Desktop/CandiGo/fronted/src/app/page.tsx"],"sourcesContent":["'use client';\r\nimport { useState } from 'react';\r\nimport { supabase } from '@/lib/supabaseClient';\r\nimport { useRouter } from 'next/navigation';\r\nimport './CSS/Login.css';    // Estilos del login (form)\r\nimport './CSS/layout.css';   // Header y layout\r\n\r\nexport default function Home() {\r\n  const router = useRouter();\r\n\r\n  // Estados para el modo: login o signup o reset\r\n  const [mode, setMode] = useState<'login' | 'signup' | 'reset'>('login');\r\n\r\n  // Datos del formulario\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [fullName, setFullName] = useState(''); // solo para signup\r\n  const [message, setMessage] = useState('');\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  // Funci贸n para login\r\n  const handleLogin = async () => {\r\n    setIsSubmitting(true);\r\n    setMessage('');\r\n    const { error } = await supabase.auth.signInWithPassword({ email, password });\r\n    if (error) setMessage('Error: ' + error.message);\r\n    else router.push('/dashboard');\r\n    setIsSubmitting(false);\r\n  };\r\n\r\n  // Funci贸n para crear cuenta\r\n  const handleSignup = async () => {\r\n    setIsSubmitting(true);\r\n    setMessage('');\r\n    const { error } = await supabase.auth.signUp({\r\n      email,\r\n      password,\r\n      options: {\r\n        data: { full_name: fullName },\r\n      },\r\n    });\r\n    if (error) setMessage('Error: ' + error.message);\r\n    else setMessage('Cuenta creada, revisa tu correo para confirmar.');\r\n    setIsSubmitting(false);\r\n  };\r\n\r\n  // Funci贸n para reset password\r\n  const handleResetPassword = async () => {\r\n    setIsSubmitting(true);\r\n    setMessage('');\r\n    const { error } = await supabase.auth.resetPasswordForEmail(email, {\r\n      redirectTo: 'https://candigo.vercel.app/reset-password', // Cambia esta URL seg煤n tu app\r\n    });\r\n    if (error) setMessage('Error: ' + error.message);\r\n    else setMessage('Revisa tu correo para restablecer la contrase帽a.');\r\n    setIsSubmitting(false);\r\n  };\r\n\r\n  // Manejador del submit seg煤n modo\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (mode === 'login') await handleLogin();\r\n    else if (mode === 'signup') await handleSignup();\r\n    else if (mode === 'reset') await handleResetPassword();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <header className=\"header\">\r\n        <div className=\"header-left\">CandiGo</div>\r\n        <div className=\"header-right\">\r\n          <button className=\"header-btn\">Bot贸n 1</button>\r\n          <button className=\"header-btn\">Bot贸n 2</button>\r\n        </div>\r\n      </header>\r\n\r\n      <div className=\"main-container\">\r\n        {/* Login/signup/reset a la izquierda */}\r\n        <div className=\"login-container\">\r\n          <div className=\"container\">\r\n            <div className=\"heading\">\r\n              {mode === 'login' && '隆Bienvenido!'}\r\n              {mode === 'signup' && 'Crear Cuenta'}\r\n              {mode === 'reset' && 'Restablecer Contrase帽a'}\r\n            </div>\r\n\r\n            <form className=\"form\" onSubmit={handleSubmit}>\r\n              {mode === 'signup' && (\r\n                <input\r\n                  placeholder=\"Nombre completo\"\r\n                  className=\"input\"\r\n                  required\r\n                  value={fullName}\r\n                  onChange={(e) => {\r\n                    setFullName(e.target.value);\r\n                    setMessage('');\r\n                  }}\r\n                />\r\n              )}\r\n\r\n              <input\r\n                placeholder=\"Correo Electr贸nico\"\r\n                id=\"email\"\r\n                name=\"email\"\r\n                type=\"email\"\r\n                className=\"input\"\r\n                required\r\n                value={email}\r\n                onChange={(e) => {\r\n                  setEmail(e.target.value);\r\n                  setMessage('');\r\n                }}\r\n              />\r\n\r\n              {(mode === 'login' || mode === 'signup') && (\r\n                <input\r\n                  placeholder=\"Contrase帽a\"\r\n                  id=\"password\"\r\n                  name=\"password\"\r\n                  type=\"password\"\r\n                  className=\"input\"\r\n                  required\r\n                  value={password}\r\n                  onChange={(e) => {\r\n                    setPassword(e.target.value);\r\n                    setMessage('');\r\n                  }}\r\n                />\r\n              )}\r\n\r\n              {mode === 'login' && (\r\n                <span className=\"forgot-password\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"link-btn\"\r\n                    onClick={() => {\r\n                      setMode('reset');\r\n                      setMessage('');\r\n                    }}\r\n                  >\r\n                    驴Olvidaste tu contrase帽a?\r\n                  </button>\r\n                </span>\r\n              )}\r\n\r\n              <input\r\n                value={\r\n                  isSubmitting\r\n                    ? mode === 'login'\r\n                      ? 'Iniciando sesi贸n...'\r\n                      : mode === 'signup'\r\n                      ? 'Creando cuenta...'\r\n                      : 'Enviando correo...'\r\n                    : mode === 'login'\r\n                    ? 'Iniciar Sesi贸n'\r\n                    : mode === 'signup'\r\n                    ? 'Crear Cuenta'\r\n                    : 'Enviar correo'\r\n                }\r\n                type=\"submit\"\r\n                className=\"login-button\"\r\n                disabled={isSubmitting}\r\n              />\r\n            </form>\r\n\r\n            <p style={{ color: 'red', textAlign: 'center' }}>{message}</p>\r\n\r\n            <div style={{ marginTop: '1rem', textAlign: 'center' }}>\r\n              {mode === 'login' && (\r\n                <button className=\"link-btn\" onClick={() => setMode('signup')}>\r\n                  Crear una cuenta nueva\r\n                </button>\r\n              )}\r\n              {(mode === 'signup' || mode === 'reset') && (\r\n                <button className=\"link-btn\" onClick={() => setMode('login')}>\r\n                  Volver a iniciar sesi贸n\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Imagen + bot贸n a la derecha */}\r\n        <div className=\"right-container\">\r\n          <img\r\n            src=\"https://www.pngarts.com/files/10/Whatsapp-Emoji-PNG-Download-Image.png\"\r\n            alt=\"Thumb up\"\r\n            className=\"logo-image\"\r\n          />\r\n          <button className=\"download-btn\">Descargar</button>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}