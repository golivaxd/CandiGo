{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 93, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Goliva/Desktop/CandiGo/fronted/src/lib/supabaseClient.ts"],"sourcesContent":["'use client';\r\nimport { createClient } from '@supabase/supabase-js';\r\nimport { useEffect } from 'react';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\r\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseKey, {\r\n  auth: {\r\n    persistSession: true,\r\n    autoRefreshToken: true,\r\n    detectSessionInUrl: true,\r\n  },\r\n});\r\n\r\nexport function useAuth(onAuth: (session: any) => void) {\r\n  useEffect(() => {\r\n    const { data: subscription } = supabase.auth.onAuthStateChange(\r\n      async (event, session) => {\r\n        if (event === 'SIGNED_IN') {\r\n          onAuth(session);\r\n        } else if (event === 'SIGNED_OUT') {\r\n          onAuth(null);\r\n        }\r\n      }\r\n    );\r\n\r\n    return () => subscription?.subscription?.unsubscribe();\r\n  }, [onAuth]);\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AACA;AACA;AAFA;;;AAIA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,CAAA,GAAA,uLAAA,CAAA,eAAY,AAAD,EAAE,aAAa,aAAa;IAC7D,MAAM;QACJ,gBAAgB;QAChB,kBAAkB;QAClB,oBAAoB;IACtB;AACF;AAEO,SAAS,QAAQ,MAA8B;IACpD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,SAAS,IAAI,CAAC,iBAAiB,CAC5D,OAAO,OAAO;YACZ,IAAI,UAAU,aAAa;gBACzB,OAAO;YACT,OAAO,IAAI,UAAU,cAAc;gBACjC,OAAO;YACT;QACF;QAGF,OAAO,IAAM,cAAc,cAAc;IAC3C,GAAG;QAAC;KAAO;AACb","debugId":null}},
    {"offset": {"line": 129, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Goliva/Desktop/CandiGo/fronted/src/app/cargos/%5Bcargo%5D/page.tsx"],"sourcesContent":["'use client';\r\nimport { useEffect, useState } from 'react';\r\nimport { useParams, useRouter } from 'next/navigation';\r\nimport { supabase } from '@/lib/supabaseClient';\r\n\r\ntype Candidato = {\r\n  id: number;\r\n  nombre: string;\r\n  cargo: string;\r\n  entidad: string;\r\n  activo: boolean;\r\n};\r\n\r\nexport default function CargoDetalle() {\r\n  const params = useParams();\r\n  const router = useRouter();\r\n  const [candidatos, setCandidatos] = useState<Candidato[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [seleccionados, setSeleccionados] = useState<number[]>([]);\r\n  const [search, setSearch] = useState('');\r\n  const [filtroEntidad, setFiltroEntidad] = useState('');\r\n\r\n  const cargoParam = params?.cargo;\r\n  const cargo = Array.isArray(cargoParam)\r\n    ? decodeURIComponent(cargoParam[0])\r\n    : decodeURIComponent(cargoParam || \"\");\r\n\r\n  useEffect(() => {\r\n    const fetchCandidatos = async () => {\r\n      setLoading(true);\r\n      const { data, error } = await supabase\r\n        .from('candidatos')\r\n        .select('id, nombre, cargo, entidad, activo')\r\n        .eq('cargo', cargo)\r\n        .eq('activo', true);\r\n\r\n      if (error) console.error('Error cargando candidatos:', error.message);\r\n      else setCandidatos(data || []);\r\n\r\n      setLoading(false);\r\n    };\r\n\r\n    if (cargo) fetchCandidatos();\r\n  }, [cargo]);\r\n\r\n  const toggleSeleccion = (id: number) => {\r\n    setSeleccionados(prev =>\r\n      prev.includes(id) ? prev.filter(i => i !== id) : [...prev, id]\r\n    );\r\n  };\r\n\r\n  const irAComparativa = () => {\r\n    if (seleccionados.length < 2) {\r\n      alert('Selecciona al menos 2 candidatos para comparar.');\r\n      return;\r\n    }\r\n    router.push(`/comparativa?ids=${seleccionados.join(',')}`);\r\n  };\r\n\r\n  const entidadesUnicas = Array.from(new Set(candidatos.map(c => c.entidad)));\r\n\r\n  const candidatosFiltrados = candidatos.filter(c => {\r\n    const matchSearch = c.nombre.toLowerCase().includes(search.toLowerCase());\r\n    const matchEntidad = filtroEntidad ? c.entidad === filtroEntidad : true;\r\n    return matchSearch && matchEntidad;\r\n  });\r\n\r\n  if (loading) return <p>Cargando candidatos...</p>;\r\n\r\n  return (\r\n    <div style={{ padding: '1rem', position: 'relative' }}>\r\n      <button onClick={() => router.back()} style={{ marginBottom: '1rem' }}>\r\n        â¬… Volver\r\n      </button>\r\n\r\n      <h1>Detalles de {cargo}</h1>\r\n\r\n      {candidatos.length === 0 && <p>No hay candidatos para este cargo.</p>}\r\n\r\n      {/* Barra fija de herramientas */}\r\n      <div\r\n        style={{\r\n          position: 'sticky',\r\n          top: 0,\r\n          backgroundColor: '#fff',\r\n          padding: '0.75rem',\r\n          marginBottom: '1rem',\r\n          borderBottom: '1px solid #ccc',\r\n          display: 'flex',\r\n          flexWrap: 'wrap',\r\n          alignItems: 'center',\r\n          gap: '0.5rem',\r\n          zIndex: 10\r\n        }}\r\n      >\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Buscar por nombre...\"\r\n          value={search}\r\n          onChange={(e) => setSearch(e.target.value)}\r\n          style={{ padding: '0.5rem', flex: '1 1 200px' }}\r\n        />\r\n        <select\r\n          value={filtroEntidad}\r\n          onChange={(e) => setFiltroEntidad(e.target.value)}\r\n          style={{ padding: '0.5rem' }}\r\n        >\r\n          <option value=\"\">Todas las entidades</option>\r\n          {entidadesUnicas.map((ent) => (\r\n            <option key={ent} value={ent}>{ent}</option>\r\n          ))}\r\n        </select>\r\n        <button\r\n          onClick={irAComparativa}\r\n          style={{\r\n            padding: '0.5rem 1rem',\r\n            backgroundColor: '#0070f3',\r\n            color: '#fff',\r\n            border: 'none',\r\n            borderRadius: '5px',\r\n            cursor: 'pointer'\r\n          }}\r\n        >\r\n          Comparar Propuestas ({seleccionados.length})\r\n        </button>\r\n      </div>\r\n\r\n      <ul style={{ padding: 0, listStyle: 'none' }}>\r\n        {candidatosFiltrados.map(c => (\r\n          <li\r\n            key={c.id}\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              marginBottom: '1rem',\r\n              border: '1px solid #ccc',\r\n              borderRadius: '6px',\r\n              padding: '0.75rem',\r\n              backgroundColor: seleccionados.includes(c.id) ? '#d0f0c0' : '#f9f9f9'\r\n            }}\r\n          >\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={seleccionados.includes(c.id)}\r\n              onChange={() => toggleSeleccion(c.id)}\r\n              style={{ marginRight: '1rem' }}\r\n            />\r\n            <div>\r\n              <h2 style={{ margin: 0 }}>{c.nombre}</h2>\r\n              <p style={{ margin: '0.25rem 0' }}><strong>Cargo:</strong> {c.cargo}</p>\r\n              <p style={{ margin: '0.25rem 0' }}><strong>Entidad:</strong> {c.entidad}</p>\r\n            </div>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n\r\n      {candidatosFiltrados.length === 0 && <p>No se encontraron candidatos con esos filtros.</p>}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}