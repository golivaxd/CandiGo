{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 93, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/LVazquez/OneDrive%20-%20CERVECERIA%20CIELITO%20LINDO/Escritorio/CandiGo/CandiGo/fronted/src/lib/supabaseClient.ts"],"sourcesContent":["'use client';\r\nimport { createClient } from '@supabase/supabase-js';\r\nimport { useEffect } from 'react';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey, {\r\n  auth: {\r\n    persistSession: true,\r\n    autoRefreshToken: true,\r\n    detectSessionInUrl: true,\r\n  },\r\n});\r\n\r\nexport function useAuth(onAuth: (session: any) => void) {\r\n  useEffect(() => {\r\n    const { data: subscription } = supabase.auth.onAuthStateChange(\r\n      async (event, session) => {\r\n        if (event === 'SIGNED_IN') {\r\n          onAuth(session);\r\n        } else if (event === 'SIGNED_OUT') {\r\n          onAuth(null);\r\n        }\r\n      }\r\n    );\r\n\r\n    return () => subscription?.subscription?.unsubscribe();\r\n  }, [onAuth]);\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AACA;AACA;AAFA;;;AAIA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,CAAA,GAAA,uLAAA,CAAA,eAAY,AAAD,EAAE,aAAa,iBAAiB;IACjE,MAAM;QACJ,gBAAgB;QAChB,kBAAkB;QAClB,oBAAoB;IACtB;AACF;AAEO,SAAS,QAAQ,MAA8B;IACpD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,SAAS,IAAI,CAAC,iBAAiB,CAC5D,OAAO,OAAO;YACZ,IAAI,UAAU,aAAa;gBACzB,OAAO;YACT,OAAO,IAAI,UAAU,cAAc;gBACjC,OAAO;YACT;QACF;QAGF,OAAO,IAAM,cAAc,cAAc;IAC3C,GAAG;QAAC;KAAO;AACb","debugId":null}},
    {"offset": {"line": 129, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/LVazquez/OneDrive%20-%20CERVECERIA%20CIELITO%20LINDO/Escritorio/CandiGo/CandiGo/fronted/src/app/a9f8k2l0/page.tsx"],"sourcesContent":["'use client';\r\nimport { useEffect, useState } from 'react';\r\nimport { supabase } from '@/lib/supabaseClient';\r\nimport './foro.css';\r\n\r\ninterface Debate {\r\n  id: number;\r\n  title: string;\r\n  author: string;\r\n  created_at: string;\r\n  description: string;\r\n}\r\n\r\ninterface Comentario {\r\n  id: number;\r\n  debate_id: number;\r\n  autor: string;\r\n  contenido: string;\r\n  created_at: string;\r\n  user_id: string;\r\n}\r\n\r\nexport default function Foro() {\r\n  const [debates, setDebates] = useState<Debate[]>([]);\r\n  const [selectedDebate, setSelectedDebate] = useState<Debate | null>(null);\r\n  const [comentarios, setComentarios] = useState<Comentario[]>([]);\r\n  const [newComentario, setNewComentario] = useState('');\r\n  const [newDebateTitle, setNewDebateTitle] = useState('');\r\n  const [newDebateDescription, setNewDebateDescription] = useState('');\r\n  const [showNewDebateForm, setShowNewDebateForm] = useState(false);\r\n  const [user, setUser] = useState<any>(null);\r\n\r\n  useEffect(() => {\r\n    fetchDebates();\r\n    supabase.auth.getSession().then(({ data }) => {\r\n      if (data.session) setUser(data.session.user);\r\n    });\r\n    supabase.auth.onAuthStateChange((_event, session) => {\r\n      setUser(session?.user || null);\r\n    });\r\n  }, []);\r\n\r\n  const fetchDebates = async () => {\r\n    const { data } = await supabase\r\n      .from('debates')\r\n      .select('*')\r\n      .order('created_at', { ascending: false });\r\n    if (data) setDebates(data);\r\n  };\r\n\r\n  const fetchComentarios = async (debateId: number) => {\r\n    const { data } = await supabase\r\n      .from('comentarios')\r\n      .select('*')\r\n      .eq('debate_id', debateId)\r\n      .order('created_at', { ascending: true });\r\n    if (data) setComentarios(data);\r\n  };\r\n\r\n  const handleDebateClick = (debate: Debate) => {\r\n    setSelectedDebate(debate);\r\n    fetchComentarios(debate.id);\r\n  };\r\n\r\n  const handleAddComentario = async () => {\r\n    if (!newComentario.trim() || !selectedDebate || !user) return;\r\n\r\n    const displayName =\r\n      user.user_metadata?.full_name ||\r\n      user.user_metadata?.display_name ||\r\n      'Usuario';\r\n\r\n    const { data } = await supabase\r\n      .from('comentarios')\r\n      .insert({\r\n        debate_id: selectedDebate.id,\r\n        autor: displayName,\r\n        contenido: newComentario,\r\n        created_at: new Date().toISOString(),\r\n        user_id: user.id\r\n      })\r\n      .select()\r\n      .single();\r\n\r\n    if (data) {\r\n      setComentarios([...comentarios, data]);\r\n      setNewComentario('');\r\n    }\r\n  };\r\n\r\n  const handleAddDebate = async () => {\r\n    if (!newDebateTitle.trim() || !newDebateDescription.trim() || !user) return;\r\n\r\n    const displayName =\r\n      user.user_metadata?.full_name ||\r\n      user.user_metadata?.display_name ||\r\n      'Usuario';\r\n\r\n    const { data } = await supabase\r\n      .from('debates')\r\n      .insert({\r\n        title: newDebateTitle,\r\n        description: newDebateDescription,\r\n        author: displayName,\r\n        created_at: new Date().toISOString()\r\n      })\r\n      .select()\r\n      .single();\r\n\r\n    if (data) {\r\n      setDebates([data, ...debates]);\r\n      setShowNewDebateForm(false);\r\n      setNewDebateTitle('');\r\n      setNewDebateDescription('');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"foro-container\">\r\n      {/* HEADER */}\r\n      <header className=\"foro-header\">\r\n        <h1>Foro de Debates</h1>\r\n        <div className=\"foro-header-buttons\">\r\n          <button\r\n            className=\"header-btn new\"\r\n            onClick={() => setShowNewDebateForm(true)}\r\n          >\r\n            Nuevo Debate\r\n          </button>\r\n          <button\r\n            className=\"header-btn back\"\r\n            onClick={() => (window.location.href = '/d3h7m1p4')}\r\n          >\r\n            Regresar\r\n          </button>\r\n        </div>\r\n      </header>\r\n\r\n      <main className=\"foro-main\">\r\n        {/* LISTA DE DEBATES */}\r\n        {!selectedDebate && !showNewDebateForm && (\r\n          <ul className=\"debate-list\">\r\n            {debates.map((debate) => (\r\n              <li\r\n                key={debate.id}\r\n                className=\"debate-item\"\r\n                onClick={() => handleDebateClick(debate)}\r\n              >\r\n                <h3>{debate.title}</h3>\r\n                <p>{debate.description}</p>\r\n                <small>\r\n                  Por {debate.author} • {new Date(debate.created_at).toLocaleString()}\r\n                </small>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        )}\r\n\r\n        {/* NUEVO DEBATE */}\r\n        {showNewDebateForm && (\r\n          <div className=\"new-debate\">\r\n            <button\r\n              className=\"back-btn\"\r\n              onClick={() => setShowNewDebateForm(false)}\r\n            >\r\n              ← Volver\r\n            </button>\r\n            <h2>Crear nuevo debate</h2>\r\n            <input\r\n              placeholder=\"Título del debate\"\r\n              value={newDebateTitle}\r\n              onChange={(e) => setNewDebateTitle(e.target.value)}\r\n            />\r\n            <textarea\r\n              placeholder=\"Descripción del debate\"\r\n              value={newDebateDescription}\r\n              onChange={(e) => setNewDebateDescription(e.target.value)}\r\n            />\r\n            <button className=\"send-btn\" onClick={handleAddDebate}>\r\n              Crear Debate\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/* DETALLE DEL DEBATE */}\r\n        {selectedDebate && (\r\n          <div className=\"debate-detalle\">\r\n            <h2>{selectedDebate.title}</h2>\r\n            <p>{selectedDebate.description}</p>\r\n            <small>\r\n              Por {selectedDebate.author} • {new Date(selectedDebate.created_at).toLocaleString()}\r\n            </small>\r\n\r\n            <h3>Comentarios</h3>\r\n            <div className=\"comentarios\">\r\n              {comentarios.map((c) => (\r\n                <div key={c.id} className=\"comentario\">\r\n                  <strong>{c.autor}</strong>{' '}\r\n                  <small>{new Date(c.created_at).toLocaleString()}</small>\r\n                  <p>{c.contenido}</p>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            <textarea\r\n              className=\"comentario-input\"\r\n              placeholder=\"Escribe tu comentario...\"\r\n              value={newComentario}\r\n              onChange={(e) => setNewComentario(e.target.value)}\r\n            />\r\n            <div className=\"comentario-buttons\">\r\n              <button className=\"send-btn\" onClick={handleAddComentario}>\r\n                Enviar Comentario\r\n              </button>\r\n              <button\r\n                className=\"back-btn inline\"\r\n                onClick={() => setSelectedDebate(null)}\r\n              >\r\n                Volver a debates\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}