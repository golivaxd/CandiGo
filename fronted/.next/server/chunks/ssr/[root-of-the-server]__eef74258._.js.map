{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 93, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Goliva/Desktop/CandiGo/fronted/src/lib/supabaseClient.ts"],"sourcesContent":["'use client';\r\nimport { createClient } from '@supabase/supabase-js';\r\nimport { useEffect } from 'react';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\r\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseKey, {\r\n  auth: {\r\n    persistSession: true,\r\n    autoRefreshToken: true,\r\n    detectSessionInUrl: true,\r\n  },\r\n});\r\n\r\nexport function useAuth(onAuth: (session: any) => void) {\r\n  useEffect(() => {\r\n    const { data: subscription } = supabase.auth.onAuthStateChange(\r\n      async (event, session) => {\r\n        if (event === 'SIGNED_IN') {\r\n          onAuth(session);\r\n        } else if (event === 'SIGNED_OUT') {\r\n          onAuth(null);\r\n        }\r\n      }\r\n    );\r\n\r\n    return () => subscription?.subscription?.unsubscribe();\r\n  }, [onAuth]);\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AACA;AACA;AAFA;;;AAIA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,CAAA,GAAA,uLAAA,CAAA,eAAY,AAAD,EAAE,aAAa,aAAa;IAC7D,MAAM;QACJ,gBAAgB;QAChB,kBAAkB;QAClB,oBAAoB;IACtB;AACF;AAEO,SAAS,QAAQ,MAA8B;IACpD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,SAAS,IAAI,CAAC,iBAAiB,CAC5D,OAAO,OAAO;YACZ,IAAI,UAAU,aAAa;gBACzB,OAAO;YACT,OAAO,IAAI,UAAU,cAAc;gBACjC,OAAO;YACT;QACF;QAGF,OAAO,IAAM,cAAc,cAAc;IAC3C,GAAG;QAAC;KAAO;AACb","debugId":null}},
    {"offset": {"line": 129, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Goliva/Desktop/CandiGo/fronted/src/app/comparativa/page.tsx"],"sourcesContent":["'use client';\r\nimport { useEffect, useState } from 'react';\r\nimport { useSearchParams } from 'next/navigation';\r\nimport { supabase } from '@/lib/supabaseClient';\r\n\r\ntype Propuesta = {\r\n  id: number;\r\n  candidato_id: number;\r\n  titulo: string;\r\n  descripcion: string;\r\n  categoria: string;\r\n};\r\n\r\ntype Candidato = {\r\n  id: number;\r\n  nombre: string;\r\n  cargo: string;\r\n  entidad: string;\r\n};\r\n\r\nexport default function Comparativa() {\r\n  const searchParams = useSearchParams();\r\n  const idsParam = searchParams.get('ids');\r\n  const ids = idsParam ? idsParam.split(',').map(Number) : [];\r\n\r\n  const [candidatos, setCandidatos] = useState<Candidato[]>([]);\r\n  const [propuestas, setPropuestas] = useState<Propuesta[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [errorMsg, setErrorMsg] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchDatos = async () => {\r\n      if (ids.length === 0) {\r\n        setCandidatos([]);\r\n        setPropuestas([]);\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      setLoading(true);\r\n      setErrorMsg(null);\r\n\r\n      try {\r\n        // ðŸ”¹ Obtener solo los candidatos seleccionados\r\n        const { data: candData, error: candError } = await supabase\r\n          .from('candidatos')\r\n          .select('id, nombre, cargo, entidad')\r\n          .in('id', ids);\r\n\r\n        if (candError) throw candError;\r\n        setCandidatos(candData || []);\r\n\r\n        // ðŸ”¹ Obtener solo las propuestas de los candidatos seleccionados\r\n        const { data: propData, error: propError } = await supabase\r\n          .from('propuestas')\r\n          .select('*')\r\n          .in('candidato_id', ids);\r\n\r\n        if (propError) throw propError;\r\n        setPropuestas(propData || []);\r\n      } catch (err: any) {\r\n        console.error('Error cargando comparativa:', err);\r\n        setErrorMsg(err?.message || 'Error desconocido');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchDatos();\r\n  }, [ids]);\r\n\r\n  if (errorMsg) return <p style={{ color: 'red' }}>Error: {errorMsg}</p>;\r\n  if (!loading && candidatos.length === 0) return <p>No hay candidatos seleccionados.</p>;\r\n\r\n  return (\r\n    <div style={{ padding: '1rem' }}>\r\n      <h1>Comparativa de Propuestas</h1>\r\n      <div style={{ display: 'flex', gap: '1rem', flexWrap: 'wrap' }}>\r\n        {candidatos.map((c) => {\r\n          const propCandidato = propuestas.filter((p) => p.candidato_id === c.id);\r\n\r\n          return (\r\n            <div\r\n              key={c.id}\r\n              style={{\r\n                border: '1px solid #ccc',\r\n                padding: '1rem',\r\n                borderRadius: '6px',\r\n                width: '300px',\r\n                backgroundColor: '#f9f9f9',\r\n              }}\r\n            >\r\n              <h2>{c.nombre}</h2>\r\n              <p><strong>Cargo:</strong> {c.cargo}</p>\r\n              <p><strong>Entidad:</strong> {c.entidad}</p>\r\n\r\n              <h3>Propuestas:</h3>\r\n              {propCandidato.length > 0 ? (\r\n                <ul>\r\n                  {propCandidato.map((p) => (\r\n                    <li key={p.id}>\r\n                      <strong>{p.titulo}</strong>: {p.descripcion} ({p.categoria})\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              ) : (\r\n                <p>No hay propuestas para este candidato.</p>\r\n              )}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}