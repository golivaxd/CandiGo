{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 93, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/LVazquez/OneDrive%20-%20CERVECERIA%20CIELITO%20LINDO/Escritorio/CandiGo/CandiGo/fronted/src/lib/supabaseClient.ts"],"sourcesContent":["'use client';\r\nimport { createClient } from '@supabase/supabase-js';\r\nimport { useEffect } from 'react';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey, {\r\n  auth: {\r\n    persistSession: true,\r\n    autoRefreshToken: true,\r\n    detectSessionInUrl: true,\r\n  },\r\n});\r\n\r\nexport function useAuth(onAuth: (session: any) => void) {\r\n  useEffect(() => {\r\n    const { data: subscription } = supabase.auth.onAuthStateChange(\r\n      async (event, session) => {\r\n        if (event === 'SIGNED_IN') {\r\n          onAuth(session);\r\n        } else if (event === 'SIGNED_OUT') {\r\n          onAuth(null);\r\n        }\r\n      }\r\n    );\r\n\r\n    return () => subscription?.subscription?.unsubscribe();\r\n  }, [onAuth]);\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AACA;AACA;AAFA;;;AAIA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,CAAA,GAAA,uLAAA,CAAA,eAAY,AAAD,EAAE,aAAa,iBAAiB;IACjE,MAAM;QACJ,gBAAgB;QAChB,kBAAkB;QAClB,oBAAoB;IACtB;AACF;AAEO,SAAS,QAAQ,MAA8B;IACpD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,SAAS,IAAI,CAAC,iBAAiB,CAC5D,OAAO,OAAO;YACZ,IAAI,UAAU,aAAa;gBACzB,OAAO;YACT,OAAO,IAAI,UAAU,cAAc;gBACjC,OAAO;YACT;QACF;QAGF,OAAO,IAAM,cAAc,cAAc;IAC3C,GAAG;QAAC;KAAO;AACb","debugId":null}},
    {"offset": {"line": 129, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/LVazquez/OneDrive%20-%20CERVECERIA%20CIELITO%20LINDO/Escritorio/CandiGo/CandiGo/fronted/src/app/comparativa/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { Suspense, useEffect, useState } from 'react';\r\nimport { useSearchParams } from 'next/navigation';\r\nimport { supabase } from '@/lib/supabaseClient';\r\nimport './comp.css';\r\n\r\ntype Propuesta = {\r\n  id: number;\r\n  candidato_id: number;\r\n  titulo: string;\r\n  descripcion: string;\r\n  categoria: string;\r\n};\r\n\r\ntype Candidato = {\r\n  id: number;\r\n  nombre: string;\r\n  cargo: string;\r\n  entidad: string;\r\n};\r\n\r\nfunction ComparativaContent() {\r\n  const searchParams = useSearchParams();\r\n\r\n  // âœ… Limpieza de IDs (soluciona el error {})\r\n  const idsParam = searchParams.get('ids');\r\n  const ids = idsParam\r\n    ? idsParam\r\n        .split(',')\r\n        .map((v) => Number(v.trim()))\r\n        .filter((n) => !isNaN(n))\r\n    : [];\r\n\r\n  const [candidatos, setCandidatos] = useState<Candidato[]>([]);\r\n  const [propuestas, setPropuestas] = useState<Propuesta[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [errorMsg, setErrorMsg] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchDatos = async () => {\r\n      if (ids.length === 0) {\r\n        setCandidatos([]);\r\n        setPropuestas([]);\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      setLoading(true);\r\n      setErrorMsg(null);\r\n\r\n      try {\r\n        // ðŸ”¹ Obtener candidatos\r\n        const { data: candData, error: candError } = await supabase\r\n          .from('candidatos')\r\n          .select('id, nombre, cargo, entidad')\r\n          .in('id', ids);\r\n\r\n        if (candError) throw candError;\r\n        setCandidatos(candData || []);\r\n\r\n        // ðŸ”¹ Obtener propuestas\r\n        const { data: propData, error: propError } = await supabase\r\n          .from('propuestas')\r\n          .select('*')\r\n          .in('candidato_id', ids);\r\n\r\n        if (propError) throw propError;\r\n        setPropuestas(propData || []);\r\n\r\n      } catch (err: any) {\r\n        console.error('Error cargando comparativa:', JSON.stringify(err, null, 2));\r\n        setErrorMsg(err?.message || 'Error desconocido');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchDatos();\r\n  }, [ids]);\r\n\r\n  if (errorMsg)\r\n    return (\r\n      <p style={{ color: 'red', textAlign: 'center', marginTop: '2rem' }}>\r\n        Error: {errorMsg}\r\n      </p>\r\n    );\r\n\r\n  if (!loading && candidatos.length === 0)\r\n    return (\r\n      <p style={{ textAlign: 'center', marginTop: '2rem' }}>\r\n        No hay candidatos seleccionados.\r\n      </p>\r\n    );\r\n\r\n  return (\r\n    <>\r\n      {/* HEADER FIJO */}\r\n      <header className=\"comp-header\">\r\n        <h2>Comparativa</h2>\r\n        <button className=\"comp-back-btn\" onClick={() => window.history.back()}>\r\n          Regresar\r\n        </button>\r\n      </header>\r\n\r\n      <div className=\"comp-main\">\r\n        <h1 className=\"comp-title\">Comparativa de Propuestas</h1>\r\n\r\n        <div className=\"comp-card-container\">\r\n          {candidatos.map((c) => {\r\n            const propCandidato = propuestas.filter((p) => p.candidato_id === c.id);\r\n\r\n            return (\r\n              <div key={c.id} className=\"comp-card\">\r\n                <h2>{c.nombre}</h2>\r\n\r\n                <p>\r\n                  <strong>Cargo:</strong> {c.cargo}\r\n                </p>\r\n\r\n                <p>\r\n                  <strong>Entidad:</strong> {c.entidad}\r\n                </p>\r\n\r\n                <h3 className=\"comp-prop-title\">Propuestas</h3>\r\n\r\n                {propCandidato.length > 0 ? (\r\n                  <ul style={{ listStyle: 'none', padding: 0, margin: 0 }}>\r\n                    {propCandidato.map((p) => (\r\n                      <li key={p.id} className=\"comp-prop-item\">\r\n                        <strong>{p.titulo}</strong>\r\n                        <br />\r\n                        <span>{p.descripcion}</span>\r\n                        <br />\r\n                        <span className=\"comp-prop-cat\">{p.categoria}</span>\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                ) : (\r\n                  <p\r\n                    style={{\r\n                      color: '#4a5568',\r\n                      fontStyle: 'italic',\r\n                      marginTop: '0.5rem',\r\n                    }}\r\n                  >\r\n                    No hay propuestas para este candidato.\r\n                  </p>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default function ComparativaPage() {\r\n  return (\r\n    <Suspense fallback={<div>Cargando comparativa...</div>}>\r\n      <ComparativaContent />\r\n    </Suspense>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}